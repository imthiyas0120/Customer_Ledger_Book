{% extends "accounts/base.html" %}
{% block content %}

<h2>Search Results for "{{ query }}"</h2>


<form method="GET" action="{% url 'accounts:search_customers' %}" style="margin-bottom: 20px;">
    <input type="text" name="q" value="{{ query }}" 
           placeholder="Search customers..."
           style="padding: 8px; width: 280px; border: 1px solid #ccc; border-radius: 5px;">
    <button type="submit" 
            style="padding: 8px 18px; background: #007bff; color:white; border:none; border-radius:5px;">
        Search
    </button>
</form>

<style>
.table-custom {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    font-size: 17px;
}

.table-custom thead {
    background: #f2f2f2;
    font-weight: bold;
}

.table-custom th,
.table-custom td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: center;
}


.btn-view {
    background-color: #007bff;
    color: white;
    padding: 6px 12px;
    border-radius: 6px;
    text-decoration: none;
}

.btn-edit {
    background-color: #28a745;
    color: white;
    padding: 6px 12px;
    border-radius: 6px;
    text-decoration: none;
}

.btn-delete {
    background-color: #dc3545;
    color: white;
    padding: 6px 12px;
    border-radius: 6px;
    text-decoration: none;
}

.btn-view:hover, .btn-edit:hover, .btn-delete:hover {
    opacity: 0.85;
}
</style>


<table class="table-custom">
    <thead>
        <tr>
            <th>Name</th>
            <th>Phone</th>
            <th>Total Amount</th>
            <th>Paid</th>
            <th>Balance</th>
            <th>Actions</th>
        </tr>
    </thead>

    <tbody>
        {% for customer in customers %}
         <tr {% if customer.is_due_1_month %} style="background-color:#ffcccc;" {% endif %}>
            <td>{{ customer.name }}</td>
            <td>{{ customer.phone }}</td>
            <td>₹{{ customer.total_amount }}</td>
            <td>₹{{ customer.total_paid }}</td>
            <td>₹{{ customer.balance }}</td>

            <td>
                <a href="{% url 'accounts:customer_ledger' customer.id %}" class="btn-view">View</a>
                <a href="{% url 'accounts:customer_edit' customer.id %}" class="btn-edit">Edit</a>
                <a href="{% url 'accounts:customer_delete' customer.id %}" class="btn-delete">Delete</a>

            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
