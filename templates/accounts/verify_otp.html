{% load static %}
{% block content %}

<div style="
    max-width: 420px;
    margin: 60px auto;
    background: white;
    padding: 35px;
    border-radius: 16px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.15);
    font-family: Arial;
    text-align: center;
">

    

    <h2 style="margin-bottom:10px;">Verify OTP</h2>
    <p style="color:#555; margin-bottom:20px;">
        Enter the OTP sent to your registered email
    </p>

    <!-- OTP Form -->
    <form method="post">
        {% csrf_token %}

        <input type="text"
               name="otp"
               placeholder="Enter OTP"
               required
               style="
                    width:100%;
                    padding:14px;
                    border-radius:8px;
                    border:1px solid #ccc;
                    font-size:16px;
                    margin-bottom:18px;
               ">

        <button type="submit"
                style="
                    width:100%;
                    padding:14px;
                    background:#007bff;
                    color:white;
                    border:none;
                    font-size:18px;
                    border-radius:8px;
                    cursor:pointer;
                ">
            Verify OTP
        </button>
    </form>

    <!-- Resend OTP -->
    <form method="post" action="{% url 'accounts:resend_otp' %}">
        {% csrf_token %}
        <button id="resendBtn"
                type="submit"
                disabled
                style="
                    margin-top:18px;
                    background:none;
                    border:none;
                    color:gray;
                    font-size:15px;
                    cursor:not-allowed;
                ">
            Resend OTP
        </button>
    </form>

    <!-- Countdown -->
    <p id="timerText"
       style="font-size:14px; color:#666; margin-top:6px;">
        Resend OTP in <span id="countdown">60</span> seconds
    </p>

    <p style="margin-top:20px; font-size:15px;">
        Remember your password?
        <a href="{% url 'login' %}" style="color:#007bff;">Login</a>
    </p>

</div>

<script>
let timeLeft = 60;

const countdownEl = document.getElementById("countdown");
const resendBtn   = document.getElementById("resendBtn");
const timerText   = document.getElementById("timerText");

const timer = setInterval(() => {
    timeLeft--;
    countdownEl.textContent = timeLeft;

    if (timeLeft <= 0) {
        clearInterval(timer);
        resendBtn.disabled = false;
        resendBtn.style.color = "#007bff";
        resendBtn.style.cursor = "pointer";
        timerText.textContent = "You can resend the OTP now";
    }
}, 1000);
</script>

{% endblock %}
